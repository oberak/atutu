<!doctype html>
<html lang="zxx">

<head>
  <% include ../partial/head.ejs %>
  <link  href="/stylesheets/cropper.css" rel="stylesheet">
  <style media="screen">
  .img-label img{
    width: 25rem;
  }
  .img-label{
    cursor: pointer;
  }
  .img-container img{
    max-width: 100%;
  }
  </style>
</head>

<body>

  <div id="wrapper" class="wrapper">

    <!-- BEGIN HEADER -->
    <% include ../partial/header.ejs %>


      <main class="site-content">

        <div class="container no-top-padding">
          <ol class="breadcrumb">
            <li><a href="#">Home</a></li>
            <li><a href="shop.html">Shop</a></li>
            <li class="active">Checkout</li>
          </ol>
          <header class="page-header">
            <h1>Create Campaign</h1>
          </header>
          <form class="checkout-form form-horizontal" name="frm" enctype="multipart/form-data">
            <h2>Campaign details</h2>
            <div class="form-group">
              <label class="col col-lg-2 col-md-2 control-label" for="camp-name">Campaign Name <span class="required">*</span></label>
              <div class="col col-lg-10 col-md-10">
                <input type="text" name="camp-name" id="camp-name" class="form-control" placeholder="Heart Of Help" required>
              </div>
            </div>
            <div class="form-group">
              <label class="col col-lg-2 col-md-2 control-label" for="categories">Categories <span class="required">*</span></label>
              <div class="col col-lg-10 col-md-10">
                <select id="categories" name="categories" class="form-control selectpicker" multiple>
                  <option value="">Select a countryâ€¦</option>
                  <option value="AL">Albania</option>
                  <option value="DZ">Algeria</option>
                  <option value="AL">Albania</option>
                  <option value="DZ">Algeria</option>
                  <option value="AL">Albania</option>
                  <option value="DZ">Algeria</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label class="col col-lg-2 col-md-2 control-label " for="image">Image <span class="required">*</span></label>
              <div class="col col-lg-10 col-md-10">
                    <label class="img-label" data-toggle="tooltip" title="Select photo">
                        <img class="rounded" id="photo" src="/images/upload.png" alt="Image">
                        <input type="file" class="sr-only" id="uploadImg" name="uploadImg" accept="images/*">
                    </label>
              </div>
            </div>
              <div class="form-group">
                <label class="col col-lg-2 col-md-2 control-label" for="brief">Brief <span class="required">*</span></label>
                <div class="col col-lg-10 col-md-10">
                  <input type="text" name="brief" id="brief" class="form-control">
                </div>
              </div>
              <div class="form-group">
                <label class="col col-lg-2 col-md-2 control-label" for="story">Story <span class="required">*</span></label>
                <div class="col col-lg-10 col-md-10">
                  <textarea class="form-control" name="story" id="story" rows="10"></textarea>
                </div>
              </div>
              <div class="form-group">
                <label class="col col-lg-2 col-md-2 control-label" for="address">Address <span class="required">*</span></label>
                <div class="col col-lg-3 col-md-10">
                  <select id="region" name="region" class="form-control selectpicker">
                    <option value="">Select a Region</option>
                    <option value="AL">Albania</option>
                    <option value="DZ">Algeria</option>
                    <option value="AL">Albania</option>
                    <option value="DZ">Algeria</option>
                    <option value="AL">Albania</option>
                    <option value="DZ">Algeria</option>
                  </select>
                </div>
                <div class="col col-lg-3 col-md-10">
                  <select id="city" name="city" class="form-control selectpicker">
                    <option value="">Select a City</option>
                    <option value="AL">Albania</option>
                    <option value="DZ">Algeria</option>
                    <option value="AL">Albania</option>
                    <option value="DZ">Algeria</option>
                    <option value="AL">Albania</option>
                    <option value="DZ">Algeria</option>
                  </select>
                </div>
                <div class="col col-lg-4 col-md-10">
                    <input type="text" name="address" id="address" class="form-control" placeholder="No.7,Aung Thu Kha street" required>
                </div>
              </div>
              <div class="form-group">
                <label class="col col-lg-2 col-md-2 control-label" for="postcode">Goal <span class="required">*</span></label>
                <div class="col col-lg-4 col-md-10">
                  <input type="number" name="goal" id="goal" class="form-control" placeholder="Amount" min="1" required>
                </div>
                <div class="col col-lg-3 col-md-10">
                  <input type="text" name="th" id="th" class="form-control" value="0,000" readonly>
                </div>
                <div class="col col-lg-3 col-md-10"  >
                  <p style="background-color:gray;font-size:25px; color:black; text-align:center;">Kyats</p>
                </div>
              </div>
              <div class="form-group">
                <label class="col col-lg-2 col-md-2 control-label" for="end-date">End date <span class="required">*</span></label>
                <div class="col col-lg-10 col-md-10">
                  <input type="date" name="end-date" id="end-date" class="form-control" required>
                </div>
              </div>
              <div class="form-group">
                <label class="col col-lg-2 col-md-2 control-label" for="tags">Tags</label>
                <div class="col col-lg-10 col-md-10">
                  <input type="text" name="tags" id="tags" class="form-control" placeholder="#Education, #Children" >
                </div>
              </div>
              <div class="text-center">
                <button type="submit" class="btn btn-lg btn-primary">Save</button>
              <button type="button" class="btn btn-default waves-effect m-r-20" data-toggle="modal" data-target="#modal">MODAL - DEFAULT SIZE</button
              </div>
          </form>
        </div>
      </main>
      <!-- END MAIN CONTENT -->



      <!-- BEGIN FOOTER -->
      <% include ../partial/footer.ejs %>
        <!-- END FOOTER -->

        </div>
        <div class="modal fade" id="modal" tabindex="-1" role="dialog">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="largeModalLabel">Modal title</h4>
                    </div>
                    <div class="modal-body">
                      <div class="img-container">
                        <img src="/images/upload.png" id="sourceImg" alt="">
                      </div>

                    </div>
                    <div class="modal-footer">
                        <button id="crop" type="button" class="btn btn-link waves-effect">Crop</button>
                        <button type="button" class="btn btn-link waves-effect" data-dismiss="modal">CLOSE</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gmaps API -->
</body>
<script src="http://maps.google.com/maps/api/js"></script>
<script src="/scripts/map-objects-data.js"></script>

<!-- Plugins js -->
<script src="/scripts/plugins.js"></script>

<!-- Main js -->
<script src="/scripts/main.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"
 integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
 crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" charset="utf-8"></script>

<script src="/javascripts/cropper.js" charset="utf-8"></script>
<script src="/javascripts/jquery-cropper.js" charset="utf-8"></script>
<script type="text/javascript">
  $(function () {
    // $('[data-toggle="tooltip"]').tooltip();
    var $modal = $('#modal');
         var uploadImg = document.getElementById('uploadImg'); // upload file
         uploadImg.addEventListener('change', function (e) {
             var files = e.target.files;
             var done = function (url) {
               uploadImg.value = '';
               $('#sourceImg').attr('src', url);
               $modal.modal('show');
             };
             var reader;
             var file;
             var url;
             if (files && files.length > 0) {
               file = files[0];
               if (URL) {
                 done(URL.createObjectURL(file));
               } else if (FileReader) {
                 reader = new FileReader();
                 reader.onload = function (e) {
                   done(reader.result);
                 };
                 reader.readAsDataURL(file);
               }
             }
         });
         var cropper;
         var canvas;
         var sourceImg = document.getElementById('sourceImg');
         $modal.on('shown.bs.modal', function () {
           cropper = new Cropper(sourceImg, {
               aspectRatio: 16 / 9,
               preview: '.img-preview',
               viewMode: 1,
           });
         }).on('hidden.bs.modal', function () {
           cropper.destroy();
           cropper = null;
         });

         $('#crop').click( function () {
           $modal.modal('hide');
           if (cropper) {
             canvas = cropper.getCroppedCanvas({
               width: 320,
               height: 180,
             });
             $('#photo').attr('src', canvas.toDataURL() ); // change cropped image
           }
         });

         $('#save').click(function(){
             canvas.toBlob(function (blob) {
                 var formData = new FormData(document.querySelector('form'));
                 formData.append('photo', blob);
                 formData.append('contents', quill.container.firstChild.innerHTML);
                 $.ajax('/admin/posts/add', {
                   method: 'POST',
                   data: formData,
                   processData: false,
                   contentType: false,
                   success: function (rtn) {
                       console.log(rtn);
                   },
                   error: function (err) {
                       console.log(err);
                   },
                   complete: function () {
                       console.log('complate');
                   },
                 });
             });
         });
       });
</script>


</html>
